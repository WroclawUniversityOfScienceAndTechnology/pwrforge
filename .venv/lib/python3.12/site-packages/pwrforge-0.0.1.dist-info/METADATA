Metadata-Version: 2.4
Name: pwrforge
Version: 0.0.1
Summary: C/C++ package and software development life cycle manager. Continuation of scargo project.
License: Copyright (c) 2025 Wroclaw University of Science and Technology.
         Copyright (c) 2025 Wroclaw University of Science and Technology.
Copyright (c) 2022 pwrforge Solution S.A.
         
         Permission is hereby granted, free of charge, to any person obtaining a copy
         of this software and associated documentation files (the "Software"), to deal
         in the Software without restriction, including without limitation the rights
         to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         copies of the Software, and to permit persons to whom the Software is
         furnished to do so, subject to the following conditions:
         
         The above copyright notice and this permission notice shall be included in all
         copies or substantial portions of the Software.
         
         THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
         SOFTWARE.
License-File: LICENSE
Keywords: firmware,package,embedded,cli
Author: Andrzej Aksenczuk
Author-email: andrzej.aksenczuk@pwr.edu.pl
Requires-Python: >=3.10
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Natural Language :: English
Classifier: Operating System :: POSIX
Classifier: Operating System :: Microsoft :: Windows
Classifier: Operating System :: MacOS :: MacOS X
Classifier: Environment :: Console
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Provides-Extra: dev
Provides-Extra: doc
Requires-Dist: Sphinx ; extra == "doc"
Requires-Dist: black (==24.8.0) ; extra == "dev"
Requires-Dist: clang (==17.0.6)
Requires-Dist: click (==8.1.3)
Requires-Dist: cmake (==3.30.5)
Requires-Dist: coloredlogs (==15.0.1)
Requires-Dist: conan (==2.8.1)
Requires-Dist: coverage (>=7.6.1,<7.7.0) ; extra == "dev"
Requires-Dist: docker (==7.1.0)
Requires-Dist: esptool (==4.7.0)
Requires-Dist: flake8 (>=6.1.0) ; extra == "dev"
Requires-Dist: flit (==3.8.0) ; extra == "dev"
Requires-Dist: gcovr (==8.2)
Requires-Dist: isort (==5.11.4) ; extra == "dev"
Requires-Dist: jinja2 (==3.1.4)
Requires-Dist: libclang (==18.1.1)
Requires-Dist: lizard (==1.17.10)
Requires-Dist: matplotlib (==3.7.5) ; extra == "dev"
Requires-Dist: mypy (==1.14.1) ; extra == "dev"
Requires-Dist: numpy (>=1.26.0) ; extra == "dev"
Requires-Dist: paramiko (==3.5.0)
Requires-Dist: pip-tools (==7.4.1) ; extra == "dev"
Requires-Dist: pre-commit ; extra == "dev"
Requires-Dist: pyclean (==3.0.0) ; extra == "dev"
Requires-Dist: pydantic (==1.10.6)
Requires-Dist: pyelftools ; extra == "dev"
Requires-Dist: pyfakefs (==5.3.2) ; extra == "dev"
Requires-Dist: pylint (==3.2.7) ; extra == "dev"
Requires-Dist: pyopenssl (==23.2.0) ; extra == "dev"
Requires-Dist: pytest (==7.4.3) ; extra == "dev"
Requires-Dist: pytest-cov (==4.1.0) ; extra == "dev"
Requires-Dist: pytest-lazy-fixture (==0.6.3) ; extra == "dev"
Requires-Dist: pytest-mock (==3.12.0) ; extra == "dev"
Requires-Dist: pytest-order (==1.2.0) ; extra == "dev"
Requires-Dist: pytest-subprocess (==1.5.0) ; extra == "dev"
Requires-Dist: pytest-xdist (==3.5.0) ; extra == "dev"
Requires-Dist: pyyaml (==6.0.2)
Requires-Dist: recommonmark ; extra == "doc"
Requires-Dist: sphinx-rtd-theme (==1.1.1) ; extra == "doc"
Requires-Dist: sphinxcontrib-plantuml (==0.30) ; extra == "doc"
Requires-Dist: toml (==0.10.2)
Requires-Dist: tomlkit (==0.13.2)
Requires-Dist: typer (==0.9.0)
Requires-Dist: types-PyYAML (==6.0.12.12) ; extra == "dev"
Requires-Dist: types-clang (==0.14.3) ; extra == "dev"
Requires-Dist: types-pyOpenSSL (==23.2.0) ; extra == "dev"
Requires-Dist: types-toml ; extra == "dev"
Requires-Dist: typing-extensions (==4.6.0)
Requires-Dist: unittest-xml-reporting ; extra == "dev"
Project-URL: Documentation, https://spyro-soft.github.io/pwrforge/index.html
Project-URL: Source, https://github.com/spyro-soft/pwrforge
Project-URL: Tracker, https://github.com/Spyro-Soft/pwrforge/issues
Description-Content-Type: text/markdown

# pwrforge
pwrforge project was written by Spyrosoft team. Find more information at [spyro-soft.com](https://spyro-soft.com/career).
<p align="center">
    <img src="https://raw.githubusercontent.com/Spyro-Soft/pwrforge/develop/docs/source/_static/spyrosoft_solutions_logo_color.png" alt="drawing" width="200"/>
</p>

# Overview
This is the documentation for pwrforge - a Python-based C/C++ package and software development life cycle manager inspired by RUST cargo idea.

pwrforge can:

- Create a new project (binary or library)
- Build the project
- Run static code analyzers
- Fix chosen problem automatically based on the checker analysis
- Run unit tests
- Generate documentation from the source code
- Work with the predefined docker environment depending on the chosen architecture

# Installation
## Installing pwrforge on Ubuntu 24.04+ (PEP 668-compliant systems)

Ubuntu 24.04 and newer follow PEP 668, which restricts the use of pip in the system Python environment to prevent accidental damage to system-managed packages.

To safely install pwrforge, use a virtual environment:

```
python3.12 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install pwrforge
```

This ensures isolated and conflict-free usage of pwrforge without requiring elevated privileges or --break-system-packages.

Alternatively, you may use pipx for global CLI installation:

```
pipx install pwrforge
```
## Install on ubuntu <=22.04, windows or macos
pwrforge is available on [pypi](https://pypi.org/project/pwrforge/), so you can install it with pip:

```pip install pwrforge```

If system does not find 'pwrforge' command after installing, add the installation directory to your env paths. On Ubuntu you can find installation directory by running:

```$ pip show "pwrforge"```

Then add to PATH e.g.:

```$ export PATH=~/.local/bin:${PATH}```

# Working with pwrforge
You can find all information on how to work with pwrforge on official documentation webpage: https://spyro-soft.github.io/pwrforge/index.html
![pwrforge flow animation](https://raw.githubusercontent.com/Spyro-Soft/pwrforge/develop/docs/source/_static/pwrforge_flow_docker.svg)

# Project dependencies
## Working with docker (recommended)
- docker with docker-compose - https://docs.docker.com/engine/install/ubuntu/
- pip
- python3 - `sudo apt install python3.10-venv python3.10-distutils -y`

# Work environment
You can always change work environment between docker or native after project is created.
Just edit the pwrforge.toml file ([project] -> build-env = "docker" or build-env = "native").
For it may be needed dependencies manually which are included in `.devcontainer/Dockerfile`

Its recommended to work in virtual environment (venv) or conda environment e.g.:
- pip install virtualenv
- virtualenv -p /usr/bin/python3.10 venv
- source venv/bin/activate


## Working in docker
1) If you create a new project, run `docker compose run pwrforge-dev` to run project development image depending on chosen architecture. All dependencies should be already there.
Run pwrforge commands as you would do natively.

2) If you create a project with --docker flag (`pwrforge new <my_proj> --docker ...`) or with any docker flag, by default each pwrforge command will be triggered in docker.

## Working natively
1) Create a project with --no-docker flag (`pwrforge new <my_proj> --no-docker ...`).

## Create the requirements for docker env
From version 2.3.2 the pwrforge is install in docker but overload by docker compose volume data, to get present version from your native env.
During deployment the requirements file is created using following command

 - `pip-compile --all-extras --output-file=ci/requirements.txt pyproject.toml`
 - `pip-compile --output-file=pwrforge/file_generators/templates/docker/requirements.txt.j2 pyproject.toml`

to have all newest dependencies. This solutions allow as to have pwrforge install in docker for ci/cd and be able to use newest features without official releases.  

## Testing custom pwrforge generated project locally
You can make changes in pwrforge and install it locally using ```pip install .``` command when you are in the main project folder.
To test the custom pwrforge version and have this custom pwrforge available also inside the docker (crucial for testing), in created project update  docker-compose.yaml:

    volumes:

      - ..:/workspace
      - /dev:/dev
      - ~/.local/lib/python3.10/site-packages/pwrforge:/usr/local/lib/python3.8/dist-packages/pwrforge

Where ```~/.local/lib/python3.10/site-packages/pwrforge``` is a path to pwrforge on your local machine. It the following path is not working, find installation dir using ```pip show pwrforge```.

To keep this setup between ```pwrforge update``` commands, in pwrforge.toml file update also ```update-exclude``` as in following example:

    update-exclude = [".devcontainer/docker-compose.yaml"]

# Known Issues

## MacOs with ARM processors
- On macOS devices with ARM processors (such as M1 and M3), USB device passthrough to Docker containers is not supported. While most development tasks can be performed within the Docker container, actions that involve direct interaction with USB devices, such as flashing firmware or monitoring hardware, must be executed natively on the host system.

## Windows

- On Windows devices, USB device passthrough is not supported in Docker containers when using Docker Desktop. To work around this limitation, you can use WSL2 (Windows Subsystem for Linux) or run a virtual machine with a Linux distribution like Ubuntu 22.04 to enable USB device access.

# Potential issues

## Docker permissions on Ubuntu

When using the `docker-compose` command, you may encounter permission errors due to insufficient permissions for accessing the Docker daemon socket. To resolve this issue, ensure that your user has the necessary permissions by adding your user to the `docker` group or granting appropriate access rights to the Docker daemon socket.
To add your user to the `docker` group, run the following command:
- `newgroup docker`
- `sudo usermod -aG docker $USER`
- `sudo systemctl restart docker`

# Contributing

See contributing guide on https://spyro-soft.github.io/pwrforge/contributing.html

